#+OPTIONS: ^:{}

* O'Reilly Style Guide

http://oreillymedia.github.io/production-resources/styleguide/


* TODO Learn logrotate

  References:
   - https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/s2-log_rotation


* TODO [#C] Configure desktop system for mu4e

  A desktop file and glue script should suffice.  It should handle
  mailto protocol properly.

  ~x-scheme-handler/mailto~

  I attempted to find the spec for ~x-scheme-handler~ and failed.

  References:
   - https://tools.ietf.org/html/rfc2368
   - https://tools.ietf.org/html/rfc6068
   - http://edoceo.com/howto/xfce-custom-uri-handler


* TODO Migration

Migrate useful sections from this file to independent notes on
personal site.

** TODO SSH configuration

** TODO SQLAlchemy

** TODO systemd


* TODO Improve Emacs configuration

** TODO Safe local variables

Find a better way to organize safe local variables configuration.
Putting them all in the Customize interface is ugly especially when
the same variable has more than one safe values.


** TODO [#C] Investigate contacts management in mu4e


* TODO Discuss Emacs bugs on mailing list


** Defect in =smtplib= related to authentication


** Bug in =dired-x= related to ~dired-bind-jump~

When ~dired-bind-jump~ is set to nil, it shouldn't set =C-x C-j= and
=C-x 4 C-j= and should leave them untouched.


* TODO MuPDF Scripts


** TODO Combine pdf and preserve index and real page number


** TODO remove all annotation from PDF file

Some PDFs you get online is annotated by other people.  A script to
remove such annotation is helpful.


* TODO [#C] Organize Calibre Books Tags

Some tags are long and redundant with others and thus should be
splitted into smaller tags.


* TODO [#C] Maildir Script to update timestamp

Most IMAP server do not sort based mail sent date but rather the
internal date.  A script to update Maildir file timestamp is helpful
since it will reconstruct roughly correct arrival date from sent date.


* TODO [#C] Patch tree command for JSON output


* TODO [#C] SQLAlchemy

** TODO [[http://aosabook.org/en/sqlalchemy.html][Architecture]] by Michael Bayer

** TODO [[https://docs.sqlalchemy.org/en/latest/core/tutorial.html][Core]] Tutorial

#+BEGIN_SRC python
from sqlalchemy import create_engine
engine = create_engine('sqlite:///:memory:', echo=True)
#+END_SRC
=echo= to enable logging via python standard module.
=create_engine= is lazy.

#+BEGIN_SRC python
from sqlalchemy import Table, Column, Integer, String, MetaData, ForeignKey
metadata = MetaData()
users = Table('users', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String),
    Column('fullname', String),
)

addresses = Table('addresses', metadata,
  Column('id', Integer, primary_key=True),
  Column('user_id', None, ForeignKey('users.id')),
  Column('email_address', String, nullable=False)
)
#+END_SRC

** TODO [[https://docs.sqlalchemy.org/en/latest/orm/tutorial.html][ORM]] Tutorial

#+BEGIN_SRC python
from sqlalchemy.ext.declarative import declarative_base
Base = declarative_base()
#+END_SRC
singleton pattern

#+BEGIN_SRC python
from sqlalchemy import Column, Integer, String
class User(Basse):
    __tablename__ = 'users'
    ...
#+END_SRC


* TODO [#A] Create an PR for ensime-sbt

  Java 11 now ships ~src.zip~ under ~lib~ as ~lib/src.zip~ and
  =ensime-sbt= cannot find it.

  Under Ubuntu, this also caused a problem. The file ~src.zip~ was
  linked to ~../openjdk-11/src.zip~ but should be
  ~../openjdk-11/lib/src.zip~ instead.


* TODO Discuss about a problem caused by anonymous function

  The example given at http://eed3si9n.com/gigahorse/concepts.html
  does not work; however, it works after factoring out the second
  argument to ~http.run~ as named function.



* ENSIME refactor infinitely applying hunk bug

See https://github.com/ensime/ensime-emacs/pull/702


* Anchor does not work on Safari

This [[https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox][link]] is an example.


* Buildship won't update

See [[https://github.com/eclipse/buildship/issues/488][#488]].


* TODO Report ENSIME implicit dependency

ENSIME depends on package ~expand-region~.


* Markdown differences

On GitHub, Markdown will insert ~<br>~ tag into the output inside
paragraph.


* DBeaver peculiarities

  * Remove ~auto-increment~ from extra before unticking auto-increment
    checkbox.  Otherwise, it won't apply.

  * Removing foreign key doesn't remove automatically created index
    with the same name.

  * Sometimes you need invalidate/reconnect the connection to reflect
    the changes.


* FreeBSD after chsh, the shell doesn't update

  After you change chsh by executing /chsh/, you re-login with old
  shell.  Possible cause may be the SSH Control Master.


* Configure git to display CJK chars

  #+BEGIN_SRC bash
    git config --global core.quotepath off
  #+END_SRC


* Set FreeBSD locale to UTF-8

  Change =~/.login_conf= to the following.

  #+BEGIN_EXAMPLE
    me:\
            :charset=UTF-8:\
            :lang=en_US.UTF-8:
  #+END_EXAMPLE


* Uninstall plugins for Safari on macOS

  Plug-ins are located under ~/Library/Internet Plug-Ins/~.  Simply
  remove them from this directory.

  Refer https://www.microsoft.com/getsilverlight/get-started/install/removing-silverlight-mac


* About Debian alternative system

  Get a list of all link groups.

  #+BEGIN_SRC bash
    update-alternatives --get-selections
  #+END_SRC

  Display information about a group.

  #+BEGIN_SRC bash
    update-alternatives --display gnome-www-browser
  #+END_SRC

  Add a group of alternatives.

  #+BEGIN_SRC bash
    update-alternatives --install /usr/bin/gnome-www-browser gnome-www-browser /usr/bin/google-chrome-stable 20
  #+END_SRC


* DONE Investigate Active Directory

  Read [[https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-2000-server/bb727030(v=technet.10)][Active Directory Architecture]].

  Skim through [[https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/d2435927-0999-4c62-8c6d-13ba31a52e1a][Active Directory Technical Specification]].


* TODO Write new answers for SE questions

** TODO GNOME 3 Alt+Tab vs Super+Tab

   https://unix.stackexchange.com/q/465681/81809

   #+BEGIN_SRC bash
     gsettings list-recursively org.gnome.desktop.wm.keybindings
   #+END_SRC


** TODO Horizontal scroll for Ubuntu 18.04

   https://askubuntu.com/q/1029128/108910


** TODO Exception list for icedtea-web

   https://stackoverflow.com/q/41727963/2117531

   https://stackoverflow.com/a/25950032/2117531

   https://icedtea.classpath.org/wiki/IcedTea-Web#Configuration

   http://mail.openjdk.java.net/pipermail/distro-pkg-dev/2016-March/034974.html


* Luatexja requires IPAEx fonts to run under Linux

  Use the following command to install IPAEx Mincho and Gothic.

  #+BEGIN_SRC bash
    apt install fonts-ipaexfont
  #+END_SRC


* Byzanz screencast

  It only works with flv for audio.

  #+BEGIN_SRC bash
    byzanz-record -v -d 15 -a screencast.flv
  #+END_SRC

  For video only, webm also works.

#+BEGIN_SRC bash
  byzanz-record -v -d 15 screencast.webm
#+END_SRC

  The output in ogv format cannot be played by MPlayer but can be
  played by Totem.

  Byzanz only works for relatively /short/ clips.


* System program problem detected

  Simply remove all the old crashes from directory =/var/crash/=.

  #+BEGIN_SRC bash
    rm /var/crash/*
  #+END_SRC

  Using =apport-cli= to upload these crashes may be a better option.

  #+BEGIN_SRC bash
    for i in /var/crash/*.crash; do
        if [ ! -e ${i::-6}.upload ]; then
            apport-cli -c $i
        fi
    done
  #+END_SRC

  The script =/usr/bin/apport-bug= is incorrect and the check of
  apport installation should be modified as follows.

  #+BEGIN_SRC sh
    if [ "${0%-collect}" != "$0" ]; then
        prefix=/usr/bin/python3
        if ! /usr/bin/python3 -c 'import apport' 2>/dev/null; then
            echo "You need to run 'sudo apt-get install python3-apport' for apport-collect to work." >&2
            exit 1
        fi
    fi
  #+END_SRC


* Force youtube-dl, wget to use IPv4

  Due to the primarily IPv4 infrastructure, it sometimes fixes
  connection by force IPv4.


* Prevent system python to add unwanted paths to =sys.path=

  This behavior is mainly controlled by the =site.py= package.  Just
  comment out invocation of =addusersitepackages= from =site.main= and
  relevant section from =site.getsitepackages=.
